# Bot5 - Bug & Issue Report

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯Bot5å°‚ç”¨ã§ã™ã€‚ç™ºè¦‹ã—ãŸãƒã‚°ã‚„ã‚¤ã‚·ãƒ¥ãƒ¼ã‚’ã“ã“ã«è¨˜éŒ²ã—ã¦ãã ã•ã„ã€‚

## å ±å‘Šå½¢å¼

### [æ—¥ä»˜] ãƒã‚°ã‚¿ã‚¤ãƒˆãƒ«
- **ç—‡çŠ¶**: ä½•ãŒèµ·ããŸã‹
- **åŽŸå› **: æŽ¨å®šã•ã‚Œã‚‹åŽŸå› 
- **ä¿®æ­£**: ã©ã†ä¿®æ­£ã—ãŸã‹ï¼ˆã¾ãŸã¯ä¿®æ­£äºˆå®šï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«**: é–¢é€£ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹

---

### [2026-02-15] use_item_on_block ã§ãƒã‚±ãƒ„ãŒæ°´/æº¶å²©ã‚’æ±²ã‚ãªã„ âœ… **FIXED**
- **ç—‡çŠ¶**: `minecraft_use_item_on_block(item_name="bucket", x, y, z)` ã§æ°´æºã‚„æº¶å²©æºã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚‚ã€`water_bucket` ã‚„ `lava_bucket` ã«ãªã‚‰ãšã€ç©ºã® `bucket` ã®ã¾ã¾ã«ãªã‚‹ã€‚ãƒ„ãƒ¼ãƒ«å‡ºåŠ›ã¯ "Collected water/lava with bucket â†’ now holding bucket" ã¨è¡¨ç¤ºã•ã‚Œã‚‹ãŒã€å®Ÿéš›ã«ã¯ã‚¢ã‚¤ãƒ†ãƒ ãŒå¤‰åŒ–ã—ã¦ã„ãªã„ã€‚
- **åŽŸå› **: `activateBlock()`ã§ã¯ãªã`activateItem()`+`deactivateItem()`ãŒå¿…è¦ã€‚ã‚µãƒ¼ãƒãƒ¼åŒæœŸå¾…ã¡æ™‚é–“ä¸è¶³ã€‚
- **ä¿®æ­£**: Bot1ãŒã‚³ãƒŸãƒƒãƒˆ8c753a6ã§ä¿®æ­£å®Œäº†ã€‚
- **ä¿®æ­£å†…å®¹**:
  - `bot.activateItem()`â†’100mså¾…æ©Ÿâ†’`bot.deactivateItem()`ã®æµã‚Œã«å¤‰æ›´
  - ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªæ›´æ–°ã‚’3ç§’é–“ãƒãƒ¼ãƒªãƒ³ã‚°ã§å¾…æ©Ÿ
  - åŒæœŸå¾…ã¡æ™‚é–“ã‚’1000msã«å»¶é•·
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/bot-manager/bot-blocks.ts` (useItemOnBlocké–¢æ•°)
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… FIXED (2026-02-15, ã‚³ãƒŸãƒƒãƒˆ8c753a6)

---

### [2026-02-15] minecraft_open_chest ã¨ minecraft_take_from_chest ã§ãƒã‚§ã‚¹ãƒˆå–ã‚Šé•ãˆ
- **ç—‡çŠ¶**: `minecraft_open_chest(x=-80, y=80, z=-53)` ã§é–‹ã„ãŸã¯ãšãŒã€`minecraft_take_from_chest()` ã‚’å‘¼ã¶ã¨åˆ¥ã®ãƒã‚§ã‚¹ãƒˆ (x=-81, y=79, z=-53) ã®å†…å®¹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚open_chestã§ "obsidian(1)" ãŒè¡¨ç¤ºã•ã‚Œã¦ã‚‚ã€take_from_chestã§ã¯ "diamond(5), leather(3), sugar_cane(10), book(1)" ã¨ãªã‚Šã€obsidianãŒå–å¾—ã§ããªã„ã€‚
- **åŽŸå› **: MCPãƒ„ãƒ¼ãƒ«ã®å†…éƒ¨çŠ¶æ…‹ç®¡ç†ã§ã€è¤‡æ•°ã®ãƒã‚§ã‚¹ãƒˆãŒè¿‘ãã«ã‚ã‚‹å ´åˆã«ã€æœ€å¾Œã«é–‹ã„ãŸãƒã‚§ã‚¹ãƒˆã§ã¯ãªãã€åˆ¥ã®ãƒã‚§ã‚¹ãƒˆã‚’å‚ç…§ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
- **å½±éŸ¿**: ãƒã‚§ã‚¹ãƒˆã‹ã‚‰ç‰¹å®šã®ã‚¢ã‚¤ãƒ†ãƒ ã‚’å–ã‚Šå‡ºã›ãšã€Phase 5ã®é€²è¡Œã«æ”¯éšœã€‚
- **å›žé¿ç­–**: ãƒã‚§ã‚¹ãƒˆã‹ã‚‰å–ã‚Šå‡ºã™ä»£ã‚ã‚Šã«ã€è‡ªåˆ†ã§é»’æ›œçŸ³4å€‹ã‚’ä½œæˆã™ã‚‹ï¼ˆæº¶å²©+æ°´ãƒã‚±ãƒ„ï¼‰ã€‚
- **ä¿®æ­£äºˆå®š**: `src/tools/crafting.ts` ã¾ãŸã¯ `src/bot-manager/bot-items.ts` ã®ãƒã‚§ã‚¹ãƒˆæ“ä½œé–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’èª¿æŸ»ã€‚
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/tools/crafting.ts`, `src/bot-manager/bot-items.ts`

---

### [2026-02-16] iron_pickaxe ã¨ iron_sword ãŒã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‹ã‚‰æ¶ˆå¤±
- **ç—‡çŠ¶**: ãƒã‚§ã‚¹ãƒˆã‹ã‚‰ `iron_pickaxe` ã¨ `iron_sword` ã‚’å–å¾—ï¼ˆtake_from_chestæˆåŠŸç¢ºèªï¼‰ã—ã€è£…å‚™ã‚‚ã—ãŸï¼ˆequipæˆåŠŸç¢ºèªï¼‰ã€‚ãã®å¾Œ pillar_up ã‚„ move_to ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€ã„ã¤ã®é–“ã«ã‹ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã‹ã‚‰æ¶ˆå¤±ã€‚stone_pickaxe ã¨ stone_sword ã®ã¿æ®‹ã£ã¦ã„ã‚‹ã€‚ãƒã‚§ã‚¹ãƒˆã«ã‚‚æˆ»ã£ã¦ã„ãªã„ã€‚
- **ç™ºç”ŸçŠ¶æ³**:
  1. ãƒã‚§ã‚¹ãƒˆ(-3,96,0)ã‹ã‚‰ iron_pickaxe ã¨ iron_sword ã‚’å–å¾—ï¼ˆæˆåŠŸï¼‰
  2. iron_pickaxe ã‚’è£…å‚™ï¼ˆæˆåŠŸï¼‰
  3. pillar_up ã§11ãƒ–ãƒ­ãƒƒã‚¯ä¸Šæ˜‡
  4. ãƒã‚§ã‚¹ãƒˆ(2,106,-1)ã‹ã‚‰ diamond ã‚’å–å¾—
  5. æ‹ ç‚¹ã«æˆ»ã‚‹ï¼ˆmove_toï¼‰
  6. ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç¢ºèª â†’ iron_pickaxe/iron_sword ãŒæ¶ˆå¤±ã€stoneç³»ã«æˆ»ã£ã¦ã„ã‚‹
- **åŽŸå› **: ä¸æ˜Žã€‚ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªåŒæœŸã®å•é¡Œã‹ã€ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç†ã®ãƒã‚°ã®å¯èƒ½æ€§ã€‚
- **å½±éŸ¿**: Phase 4æœªé”æˆã€‚é‰„è£…å‚™ã‚’å†å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚
- **ä¿®æ­£äºˆå®š**: ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç®¡ç†å‘¨ã‚Šã®ã‚³ãƒ¼ãƒ‰ã‚’èª¿æŸ»ã€‚
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/bot-manager/bot-items.ts`, `src/tools/crafting.ts`

---

### [2026-02-16] stick ã‚¯ãƒ©ãƒ•ãƒˆã§ birch_planks ã‚’ä½¿ã‚ãš dark_oak_planks ã‚’é¸æŠž âœ… **PARTIALLY FIXED**
- **ç—‡çŠ¶**: ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªã« `birch_planks x50` ãŒã‚ã‚‹çŠ¶æ…‹ã§ `minecraft_craft(item_name="stick", count=2)` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€"missing ingredient" ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚
- **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: `Failed to craft stick from birch_planks: Error: missing ingredient. Try crafting planks from logs first`
- **åŽŸå› **:
  1. bot.recipesAll(item.id, null, null)ãŒä½•ã‹ãƒ¬ã‚·ãƒ”ã‚’è¿”ã—ã¦ã„ã‚‹
  2. ãã®å¾Œã®ã‚¯ãƒ©ãƒ•ãƒˆå®Ÿè¡Œã§ã€Œmissing ingredientã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
  3. ãƒžãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ¬ã‚·ãƒ”ã®æ¡ä»¶`allRecipes.length === 0`ã«åˆ°é”ã—ã¦ã„ãªã„
  4. ã¤ã¾ã‚Šã€æœ‰åŠ¹ãªãƒ¬ã‚·ãƒ”ãŒå­˜åœ¨ã—ãªã„ã®ã«recipesAllãŒä½•ã‹ã‚’è¿”ã—ã¦ã„ã‚‹ï¼ˆMineflayer/mcDataã®ãƒã‚°ã®å¯èƒ½æ€§ï¼‰
- **å½±éŸ¿**: stickãŒä½œæˆã§ããšã€çŸ³ãƒ„ãƒ¼ãƒ«ä½œæˆã«æ”¯éšœã€‚ãŸã ã—æ—¢ã«ãƒ€ã‚¤ãƒ¤è£…å‚™ãŒã‚ã‚‹ãŸã‚å„ªå…ˆåº¦ã¯ä½Žã„ã€‚
- **ä¿®æ­£å†…å®¹(è©¦ã¿ã‚‰ã‚ŒãŸãŒå¤±æ•—)**:
  - ãƒžãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ¬ã‚·ãƒ”ä½œæˆç®‡æ‰€ã§æœ€ã‚‚æ•°é‡ãŒå¤šã„ planks ã‚’é¸æŠžã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ï¼ˆline 417-418ï¼‰
  - ãŸã ã—ã€ã“ã®ã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¹ã«åˆ°é”ã—ãªã„ãŸã‚ç„¡åŠ¹
- **ä¿®æ­£æ¡ˆ**:
  - bot.recipesAll()ã®æˆ»ã‚Šå€¤ã‚’ãƒ•ã‚£ãƒ«ã‚¿ã—ã¦æœ‰åŠ¹ãªãƒ¬ã‚·ãƒ”ã ã‘ã‚’ä½¿ç”¨ã™ã‚‹
  - ã¾ãŸã¯ã€stick ã‚¯ãƒ©ãƒ•ãƒˆã®å ´åˆã¯å¸¸ã«ãƒžãƒ‹ãƒ¥ã‚¢ãƒ«ãƒ¬ã‚·ãƒ”ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«æ¡ä»¶ã‚’å¤‰æ›´
  - ã¾ãŸã¯ã€bot.recipesFor()ã§å€‹åˆ¥ã«ãƒ¬ã‚·ãƒ”ç¢ºèªã‚’è©¦ã¿ã‚‹
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/bot-manager/bot-crafting.ts` (line 405-444)
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ðŸ”´ æœªè§£æ±º (2026-02-16ç¢ºèª)

### [2026-02-17] stick ã‚¯ãƒ©ãƒ•ãƒˆ bug - ROOT CAUSE IDENTIFIED
- **ç—‡çŠ¶**: dark_oak_planks x4 ã‚’æŒã£ã¦ã„ã‚‹ã®ã« stick craft ãŒå¤±æ•—
- **ã‚¨ãƒ©ãƒ¼**: "Failed to craft stick from dark_oak_planks: Error: missing ingredient"
- **æ ¹æœ¬åŽŸå› **: bot-crafting.ts line 663-665
  ```typescript
  if ((itemName === "stick" || itemName === "crafting_table") && allRecipes.length > 0) {
    compatibleRecipe = allRecipes[0];  // <- BUG: äº’æ›æ€§ãƒã‚§ãƒƒã‚¯ãªã—ã§ä½¿ç”¨ï¼
  }
  ```
  - `bot.recipesAll()` ãŒãªã‚“ã‚‰ã‹ã®ãƒ¬ã‚·ãƒ”ã‚’è¿”ã™ï¼ˆoak_planksç­‰ï¼‰
  - ãã®ç›´å¾Œã«ã™ããã®ãƒ¬ã‚·ãƒ”ã‚’ä½¿ç”¨ â†’ äº’æ›æ€§æ¤œè¨¼ã‚¹ã‚­ãƒƒãƒ—
  - dark_oak_planks ã§ã¯å®Ÿè¡Œå¤±æ•—
- **ä¿®æ­£æ¡ˆ**: lines 663-665 ã‚’å‰Šé™¤ã—ã¦ã€å¸¸ã« compatibleRecipe search ã‚’å®Ÿè¡Œã•ã›ã‚‹
  - ã¾ãŸã¯ `allRecipes` ã‚’ãƒ•ã‚£ãƒ«ã‚¿ã—ã¦ `dark_oak_planks` å¯¾å¿œãƒ¬ã‚·ãƒ”ã‚’æŽ¢ã™
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `src/bot-manager/bot-crafting.ts` (lines 663-665)
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ðŸ”§ ä¿®æ­£å®Ÿè£…äºˆå®š

---

