# Minecraftサーバー設定問題レポート

## 発見日時
2026-02-12

## サーバー情報
- ホスト: localhost
- ポート: 60038
- 接続ユーザー: Claude

## 発見された問題

### 1. ブロック採掘時のアイテムドロップ不具合（重大）

**症状:**
- 鉱石ブロック（coal_ore, iron_ore等）を正しいツールで採掘してもアイテムがドロップしない
- ブロックは正常に破壊されるが、ドロップアイテムがスポーンしない
- 100%再現する問題

**テストケース:**
```
1. coal_oreをstone_pickaxeで採掘
   結果: ブロック破壊成功、coal x0 ドロップ（期待: coal x1）

2. iron_oreをstone_pickaxeで採掘
   結果: ブロック破壊成功、raw_iron x0 ドロップ（期待: raw_iron x1）
```

**考えられる原因:**
1. `/gamerule doTileDrops false` に設定されている
2. ゲームモードがクリエイティブになっている
3. サーバープラグインがアイテムドロップをブロックしている
4. サーバー独自の設定でドロップが無効化されている

**影響範囲:**
- 資源収集が不可能
- 採掘系スキル全般が機能しない
- ゲームプレイの進行が著しく困難

### 2. クラフト時のアイテム生成不具合（重大）

**症状:**
- クラフトレシピ実行後、生成されたアイテムがインベントリに追加されない
- クラフト材料は正しく消費される
- 生成されたはずのアイテムが消失する

**テストケース:**
```
1. crafting_tableをクラフト（birch_planks x4 → crafting_table x1）
   結果: birch_planks 32→28に減少、crafting_table受領できず

   クラフト前インベントリ: birch_planks(32)
   クラフト後インベントリ: birch_planks(28), crafting_table(0) ← 期待は(1)
```

**考えられる原因:**
1. 問題1と同じくアイテムスポーン全般の問題
2. サーバーのインベントリ同期の不具合
3. プラグインによるアイテム生成の干渉

**影響範囲:**
- ツール・武器の作成が不可能
- 進行に必要なアイテムを入手できない
- ゲームプレイがほぼ不可能

## 正常に動作する機能

- ボット接続・認証
- 移動（minecraft_move_to）
- HP/空腹度の確認
- インベントリ確認
- 周囲環境の認識
- エンティティ検知
- チャット送信
- 戦闘（攻撃・逃走）
- ブロック破壊（アイテムドロップを除く）

## 推奨される修正アクション

### サーバー管理者向け
1. ゲームルール確認:
   ```
   /gamerule doTileDrops true
   ```

2. ゲームモード確認:
   ```
   /gamemode survival
   ```

3. サーバープラグイン確認:
   - アイテムドロップを制御するプラグインを無効化
   - ワールド保護プラグインの設定確認

4. server.properties確認:
   - `gamemode=survival`
   - カスタム設定でアイテムドロップが無効化されていないか

### 開発者向け
- bot-blocks.ts:669-671で詳細なエラーメッセージを出力済み
- これ以上のコード修正では解決不可能（サーバー側の問題）
- テスト環境として別のサーバーの利用を推奨

## 回避策

現在のサーバー設定では以下の活動のみ可能:
- 移動・探索
- 既存インベントリアイテムの利用
- 戦闘（既存武器で）
- 情報収集・環境認識

以下の活動は不可能:
- 採掘による資源収集
- クラフトによるアイテム作成
- ゲーム進行全般

## 結論

このMinecraftサーバーは、アイテムドロップとクラフトという2つの基本機能が動作していないため、通常のサバイバルプレイが不可能です。サーバー管理者による設定修正が必須です。
