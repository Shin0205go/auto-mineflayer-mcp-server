# Mineflayer MCP Server

**Claude AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒMinecraftã‚’è‡ªå¾‹çš„ã«ãƒ—ãƒ¬ã‚¤ã™ã‚‹ãŸã‚ã®MCPã‚µãƒ¼ãƒãƒ¼**

```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    ğŸ¤– Claude Bot       â”‚  â† è‡ªå¾‹çš„ã«ã‚µãƒã‚¤ãƒãƒ«
    â”‚                        â”‚
    â”‚   â›ï¸ æ¡æ˜              â”‚  â† ç´ æåé›†
    â”‚   ğŸ”¨ ã‚¯ãƒ©ãƒ•ãƒˆ          â”‚  â† é“å…·ä½œæˆ
    â”‚   âš”ï¸ æˆ¦é—˜              â”‚  â† æ•µã¨æˆ¦ã†
    â”‚   ğŸ  å»ºç¯‰              â”‚  â† æ§‹é€ ç‰©å»ºç¯‰
    â”‚   ğŸ§  è‡ªå·±æ”¹å–„          â”‚  â† è¡Œå‹•æœ€é©åŒ–
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ©Ÿèƒ½

### è‡ªå¾‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- **Game Agent** - Minecraftã‚’è‡ªå¾‹çš„ã«ãƒ—ãƒ¬ã‚¤ï¼ˆæ¡æ˜ã€ã‚¯ãƒ©ãƒ•ãƒˆã€æˆ¦é—˜ã€å»ºç¯‰ï¼‰
- **Dev Agent** - ãƒ„ãƒ¼ãƒ«å¤±æ•—ã‚’åˆ†æã—ã¦ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£ + è¡Œå‹•è¨­å®šãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
- **Report Agent** - é€²åŒ–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆ30åˆ†ã”ã¨ï¼‰

### ã‚µãƒã‚¤ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰
- **æ¡æ˜ãƒ»åé›†** - ãƒ–ãƒ­ãƒƒã‚¯ç ´å£Šã€ã‚¢ã‚¤ãƒ†ãƒ åé›†ã€é‰±çŸ³æ¡æ˜
- **ã‚¯ãƒ©ãƒ•ãƒˆ** - é“å…·ã€ãƒ–ãƒ­ãƒƒã‚¯ã€è£…å‚™ä½œæˆ
- **æˆ¦é—˜** - æ•µãƒ¢ãƒ–ã¨è‡ªå‹•æˆ¦é—˜ï¼ˆæ­¦å™¨è£…å‚™ã€HPç®¡ç†ã€é€ƒèµ°åˆ¤æ–­ï¼‰
- **æ¢ç´¢** - ãƒã‚¤ã‚ªãƒ¼ãƒ æ¤œç´¢ã€ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ¤œç´¢ã€è³‡æºæ¢ç´¢

### ã‚¹ã‚­ãƒ«ãƒ™ãƒ¼ã‚¹ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- **é‰„æ¡æ˜** (`iron-mining`) - é‰„é‰±çŸ³æ¡æ˜â†’ç²¾éŒ¬â†’ãƒ„ãƒ¼ãƒ«ä½œæˆ
- **ãƒ€ã‚¤ãƒ¤æ¡æ˜** (`diamond-mining`) - ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰æ¢ç´¢ãƒ»æ¡æ˜
- **ãƒ™ãƒƒãƒ‰ä½œæˆ** (`bed-crafting`) - ç¾Šæ¢ç´¢â†’ç¾Šæ¯›åé›†â†’ãƒ™ãƒƒãƒ‰ä½œæˆ
- **ãƒã‚¶ãƒ¼ãƒãƒ¼ã‚¿ãƒ«** (`nether-gate`) - é»’æ›œçŸ³åé›†â†’ãƒãƒ¼ã‚¿ãƒ«å»ºè¨­

### è‡ªå·±æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ 
- **ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£** - ãƒ„ãƒ¼ãƒ«å¤±æ•—ã‚’æ¤œçŸ¥â†’Claude SDKã§ä¿®æ­£â†’ãƒ“ãƒ«ãƒ‰â†’å†èµ·å‹•
- **è¡Œå‹•ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°** - ãƒ«ãƒ¼ãƒ—çµæœã‚’åˆ†æâ†’æ€§æ ¼/å„ªå…ˆåº¦/é–¾å€¤ã‚’èª¿æ•´
- **é€²åŒ–å±¥æ­´** - è¨­å®šå¤‰æ›´ã®å±¥æ­´ã‚’è‡ªå‹•è¨˜éŒ² (`learning/evolution-history.jsonl`)

### ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
- **è¤‡æ•°ãƒœãƒƒãƒˆ** - Claude, Claude2ã‚’åŒæ™‚èµ·å‹•å¯èƒ½
- **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ²ç¤ºæ¿** - è¤‡æ•°AIé–“ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€£æº
- **ãƒ«ãƒ¼ãƒ—çµ‚äº†ãƒ•ãƒƒã‚¯** - æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ²ç¤ºæ¿ã«è‡ªå‹•è¨˜éŒ²

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
npm run build
```

### 2. ç’°å¢ƒå¤‰æ•°

```bash
cp .env.example .env
# MC_HOST, MC_PORT, ANTHROPIC_API_KEY ã‚’è¨­å®š
```

### 3. Minecraftã‚µãƒ¼ãƒãƒ¼æº–å‚™

- Java Edition ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
- **ã‚ªãƒšãƒ¬ãƒ¼ã‚¿ãƒ¼æ¨©é™ãŒå¿…è¦**ï¼ˆ`/op Claude`ï¼‰
- ã‚·ãƒ³ã‚°ãƒ«ãƒ—ãƒ¬ã‚¤ã®ã€ŒLANã«å…¬é–‹ã€ã§ã‚‚OK

## èµ·å‹•æ–¹æ³•

### æ¨å¥¨: è‡ªå·±æ”¹å–„ã‚·ã‚¹ãƒ†ãƒ 

```bash
# MCP WSã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼‰
npm run start:mcp-ws

# Dev Agent + Game Agentï¼ˆè‡ªå·±æ”¹å–„ãƒ¢ãƒ¼ãƒ‰ï¼‰
npm run start:self-improve
```

Dev AgentãŒGame Agentã‚’ç®¡ç†ã—ã€ãƒ„ãƒ¼ãƒ«å¤±æ•—æ™‚ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã€è¡Œå‹•å•é¡Œæ™‚ã«è¨­å®šãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’è‡ªå‹•å®Ÿè¡Œã€‚

### å€‹åˆ¥èµ·å‹•

```bash
# Game Agentå˜ä½“
npm run start:game-agent

# Dev Agentå˜ä½“ï¼ˆGame Agentç®¡ç†ãªã—ï¼‰
npm run start:dev-agent

# Report Agentï¼ˆé€²åŒ–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼‰
npm run start:report-agent

# æ²ç¤ºæ¿ã‚µãƒ¼ãƒãƒ¼
npm run board

# MCPã‚µãƒ¼ãƒãƒ¼ï¼ˆstdioï¼‰- Claude Desktopç”¨
npm start
```

### ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

```bash
# 2ä½“ç›®ã®Claudeï¼ˆåˆ¥åï¼‰
BOT_USERNAME=Claude2 MC_PORT=58896 npm run start:game-agent
```

## ä¸»è¦MCPãƒ„ãƒ¼ãƒ«

### æ¥ç¶šãƒ»ç§»å‹•
- `minecraft_connect` - ã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶š
- `minecraft_move_to` - åº§æ¨™ç§»å‹•ï¼ˆsolid blockã¯è‡ªå‹•ã§éš£ã®air blockã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
- `minecraft_get_surroundings` - å‘¨å›²ã®çŠ¶æ³ç¢ºèª
- `minecraft_get_position` - ç¾åœ¨åº§æ¨™

### ã‚µãƒã‚¤ãƒãƒ«
- `minecraft_dig_block` - ãƒ–ãƒ­ãƒƒã‚¯ç ´å£Š
- `minecraft_craft` - ã‚¯ãƒ©ãƒ•ãƒˆï¼ˆè‡ªå‹•ã§ã‚¯ãƒ©ãƒ•ãƒˆå°æ¤œç´¢ï¼‰
- `minecraft_smelt` - ç²¾éŒ¬ï¼ˆè‡ªå‹•ã§ã‹ã¾ã©æ¤œç´¢ï¼‰
- `minecraft_get_inventory` - ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªç¢ºèª
- `minecraft_equip` - ã‚¢ã‚¤ãƒ†ãƒ è£…å‚™
- `minecraft_check_infrastructure` - ã‚¯ãƒ©ãƒ•ãƒˆå°ãƒ»ã‹ã¾ã©æ¤œç´¢

### æˆ¦é—˜ãƒ»ç”Ÿå­˜
- `minecraft_fight` - æ•µã¨æˆ¦ã†ï¼ˆè‡ªå‹•è£…å‚™ãƒ»æ”»æ’ƒãƒ»é€ƒèµ°ï¼‰
- `minecraft_get_status` - HP/ç©ºè…¹ç¢ºèª
- `minecraft_eat` - é£Ÿäº‹
- `minecraft_flee` - é€ƒèµ°
- `minecraft_get_nearby_entities` - è¿‘ãã®ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£

### å»ºç¯‰ãƒ»ç§»å‹•è£œåŠ©
- `minecraft_place_block` - ãƒ–ãƒ­ãƒƒã‚¯è¨­ç½®
- `minecraft_pillar_up` - ã‚¸ãƒ£ãƒ³ãƒ—è¨­ç½®ã§ä¸Šæ˜‡
- `minecraft_tunnel` - ãƒˆãƒ³ãƒãƒ«æ˜å‰Š
- `minecraft_level_ground` - åœ°é¢æ•´åœ°

### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æº
- `agent_board_read` - æ²ç¤ºæ¿ã‚’èª­ã‚€
- `agent_board_write` - æ²ç¤ºæ¿ã«æ›¸ã
- `agent_board_wait` - æ–°ç€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¾…æ©Ÿ
- `agent_board_clear` - ã‚¯ãƒªã‚¢

### ã‚¹ã‚­ãƒ«å®Ÿè¡Œï¼ˆTask toolçµŒç”±ï¼‰
- `iron-mining` - é‰„æ¡æ˜ã‚¹ã‚­ãƒ«
- `diamond-mining` - ãƒ€ã‚¤ãƒ¤æ¡æ˜ã‚¹ã‚­ãƒ«
- `bed-crafting` - ãƒ™ãƒƒãƒ‰ä½œæˆã‚¹ã‚­ãƒ«
- `nether-gate` - ãƒã‚¶ãƒ¼ãƒãƒ¼ã‚¿ãƒ«å»ºè¨­ã‚¹ã‚­ãƒ«

### è‡ªå·±å­¦ç¿’
- `save_memory` - é‡è¦æƒ…å ±ã‚’è¨˜æ†¶
- `recall_memory` - è¨˜æ†¶ã‚’å‚ç…§
- `log_experience` - çµŒé¨“ã‚’è¨˜éŒ²
- `get_skills` - ã‚¹ã‚­ãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå‚ç…§

## è‡ªå·±æ”¹å–„ã®ä»•çµ„ã¿

### 1. ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£ï¼ˆDev Agentï¼‰

```
ãƒ„ãƒ¼ãƒ«å¤±æ•—ï¼ˆ3ä»¶ä»¥ä¸Šï¼‰
  â†“
Dev AgentãŒå¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æ
  â†“
Claude SDK Editãƒ„ãƒ¼ãƒ«ã§ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£
  â†“
TypeScriptæ§‹æ–‡ãƒã‚§ãƒƒã‚¯
  â†“
npm run build
  â†“
Game Agentå†èµ·å‹•
```

### 2. è¡Œå‹•ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆDev Agentï¼‰

```
Game Agentãƒ«ãƒ¼ãƒ—å®Œäº†ï¼ˆ5å› or 3åˆ†ï¼‰
  â†“
ãƒ«ãƒ¼ãƒ—çµæœã‚’MCPçµŒç”±ã§é€ä¿¡
  â†“
Dev AgentãŒè¡Œå‹•åˆ†æ
  â†“
learning/agent-config.jsonæ›´æ–°
  â†“
Game Agentæ¬¡ãƒ«ãƒ¼ãƒ—ã§è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å†…å®¹ |
|---------|------|
| `learning/agent-config.json` | æ€§æ ¼ï¼ˆæ”»æ’ƒæ€§ãƒ»æ¢ç´¢æ„æ¬²ãƒ»ãƒªã‚¹ã‚¯è¨±å®¹ï¼‰ã€å„ªå…ˆåº¦ã€é–¾å€¤ |
| `learning/evolution-history.jsonl` | è¨­å®šå¤‰æ›´å±¥æ­´ï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãƒ»å¤‰æ›´å†…å®¹ãƒ»ç†ç”±ï¼‰ |
| `logs/loop-results.jsonl` | ãƒ«ãƒ¼ãƒ—å®Ÿè¡Œçµæœï¼ˆæˆåŠŸ/å¤±æ•—ãƒ»ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ãƒ»HP/é£Ÿæ–™ï¼‰ |
| `logs/tool-execution.jsonl` | ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œãƒ­ã‚°ï¼ˆæˆåŠŸ/å¤±æ•—ãƒ»ã‚¨ãƒ©ãƒ¼å†…å®¹ï¼‰ |

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ index.ts              # MCPã‚µãƒ¼ãƒãƒ¼ (stdio)
â”œâ”€â”€ mcp-ws-server.ts      # MCPã‚µãƒ¼ãƒãƒ¼ (WebSocket)
â”œâ”€â”€ bot-manager.ts        # Mineflayerãƒœãƒƒãƒˆç®¡ç†
â”œâ”€â”€ tools/                # MCPãƒ„ãƒ¼ãƒ«å®Ÿè£…
â”‚   â”œâ”€â”€ connection.ts     # æ¥ç¶šãƒ»åˆ‡æ–­
â”‚   â”œâ”€â”€ movement.ts       # ç§»å‹•
â”‚   â”œâ”€â”€ environment.ts    # ç’°å¢ƒèªè­˜
â”‚   â”œâ”€â”€ building.ts       # å»ºç¯‰
â”‚   â”œâ”€â”€ crafting.ts       # ã‚¯ãƒ©ãƒ•ãƒˆ
â”‚   â”œâ”€â”€ combat.ts         # æˆ¦é—˜
â”‚   â”œâ”€â”€ coordination.ts   # æ²ç¤ºæ¿
â”‚   â””â”€â”€ learning.ts       # å­¦ç¿’ãƒ»è¨˜æ†¶
â”œâ”€â”€ agent/                # Claudeã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ claude-agent.ts   # Game Agentï¼ˆã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ï¼‰
â”‚   â”œâ”€â”€ dev-agent.ts      # Dev Agentï¼ˆã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ä¿®æ­£ + è¨­å®šãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ï¼‰
â”‚   â”œâ”€â”€ report-agent.ts   # Report Agentï¼ˆé€²åŒ–ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ claude-client.ts  # Claude SDK ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ mcp-ws-transport.ts
â””â”€â”€ types/
    â”œâ”€â”€ tool-log.ts       # ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œãƒ­ã‚°å‹
    â””â”€â”€ agent-config.ts   # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šå‹
```

## ç’°å¢ƒå¤‰æ•°

```bash
# Minecraftæ¥ç¶š
MC_HOST=localhost
MC_PORT=25565
BOT_USERNAME=Claude

# MCP WebSocket
MCP_WS_URL=ws://localhost:8765

# Dev Agent
MANAGE_GAME_AGENT=true  # Dev AgentãŒGame Agentã‚’ç®¡ç†

# Claude API
ANTHROPIC_API_KEY=sk-...
CLAUDE_MODEL=opus  # dev-agentã®ãƒ¢ãƒ‡ãƒ«ï¼ˆopus/sonnet/haikuï¼‰
```

## ä½¿ç”¨ä¾‹

### è‡ªå¾‹ã‚µãƒã‚¤ãƒãƒ«

```
Claude: [minecraft_connect] â†’ æ¥ç¶š
        [minecraft_get_surroundings] â†’ å‘¨å›²ç¢ºèª
        [minecraft_dig_block] â†’ æœ¨ã‚’ä¼æ¡
        [minecraft_craft item="stick"] â†’ æ£’ã‚’ã‚¯ãƒ©ãƒ•ãƒˆ
        [minecraft_craft item="wooden_pickaxe"] â†’ ãƒ”ãƒƒã‚±ãƒ«ä½œæˆ
        [Task skill="iron-mining"] â†’ é‰„æ¡æ˜ã‚¹ã‚­ãƒ«å®Ÿè¡Œ
```

### è‡ªå·±æ”¹å–„ã®å®Ÿä¾‹

```
Loop #1: minecraft_move_to ãŒ solid block ã§ã‚¨ãƒ©ãƒ¼
  â†“
Dev Agent: bot-manager.ts ã‚’ä¿®æ­£ï¼ˆéš£ã®air blockã¸è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
  â†“
ãƒ“ãƒ«ãƒ‰ â†’ Game Agentå†èµ·å‹•
  â†“
Loop #2: ã‚¨ãƒ©ãƒ¼è§£æ¶ˆã€å‹•ä½œæ”¹å–„
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT
